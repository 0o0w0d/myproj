{% extends "photolog/base.html" %}
{% load component_tags %}

{% block photolog-content %}
<div class="container">
  <div class="row">
    {% for note in note_list %}
    {% component "image-overlay" class="col-xl-3 col-lg-4 col-md-6 mt-4" %}
    {% fill 'href' %}{% url 'photolog:note_detail' note.pk %}{% endfill %}
    {% fill "img-src" %}{{ note.photo_set.all.0.image.url }}{% endfill %}
    {% fill "text" %}
            {{ note.title }}<br/>
            <small>by {{ note.author.username }}</small>
            <small class="d-block mt-3 text-muted">
              {% for tag in note.tags.all %}
                  {% if forloop.counter0 < 5 %}
                      #{{ tag.name }}
                  {% endif %}
              {% endfor %}
            </small>
    {% endfill %}
    {% endcomponent %}
    {% comment %} <div class="col-xl-3 col-lg-4 col-md-6 mt-4">
      <div class="card">
        <div class="card-header">
          {{ note.title }}
          <small>by {{ note.author.username }}</small>
        </div>
        <div class="card-body">
          {# Eager Loading 내역을 사용하기 위해 first 대신 all.0 호출 #}
          <img src="{{ note.photo_set.all.0.image.url }}" alt="" class="img-fluid">
        </div>
      </div>
      </div> {% endcomment %}
    {% endfor %}
  </div>
</div>  


{% endblock photolog-content %}